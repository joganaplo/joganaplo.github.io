<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Jóganapló</title>

  <style>
    :root {
      --content-width: 42rem;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont,
                   "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      color: #111;
    }

    .intro {
      padding: 1.25rem 1rem 2rem;
      max-width: var(--content-width);
      margin: 0 auto;
      font-size: 1rem;
      line-height: 1.6;
    }

    .intro a {
      color: #0066cc;
      text-decoration: none;
    }

    .intro a:hover {
      text-decoration: underline;
    }

    img {
      width: 100%;
      max-width: var(--content-width);
      margin: 0 auto;
      display: block;
    }

    #page-indicator {
      position: fixed;
      top: 0.75rem;
      right: 0.75rem;
      background: rgba(255,255,255,0.85);
      backdrop-filter: blur(4px);
      padding: 0.25rem 0.5rem;
      border-radius: 0.5rem;
      font-size: 0.875rem;
      font-weight: 500;
      z-index: 1000;
      pointer-events: none;
    }
  </style>
</head>

<body>

<div id="page-indicator">1</div>

<div class="intro">
  <p>
    Ez a <strong>Jóganapló</strong>, ami a
    <strong>Szárazföldi napló</strong> része, ami a
    <strong>Tengeri napló</strong> folytatása.
  </p>

  <p>
    Utóbbi az Apple Books oldalán
    <a href="https://books.apple.com/book/id6504611427" target="_blank" rel="noopener">
      itt érhető el,
    </a>
    míg a Szárazföldi napló teljes terjedelmében csak a
    <a href="https://apps.apple.com/hu/app/id6736395120" target="_blank" rel="noopener">
      Folyó nevű iPhone-appban
    </a>
    olvasható. Ez mind kitalált történet, semmi köze nincs a valósághoz.
  </p>

  <p>
    Ha nincs iPhone-od, és mégis olvasnád, írj a
    <a href="mailto:catanore@icloud.com?subject=Jóganapló">
      catanore@icloud.com
    </a>
    címre, megoldjuk!
  </p>
</div>

<div id="images"></div>

<script>
  const container = document.getElementById("images");
  const indicator = document.getElementById("page-indicator");

  const firstIndex = 26;
  const lastIndex = 113;

  const pages = [];
  let pageNumber = 1;

  for (let i = firstIndex; i <= lastIndex; i++) {

    if (i === 85) {
      const notice = document.createElement("div");
      notice.className = "intro";
      notice.innerHTML = `
        <p>
          Itt egy bajszos fotó következik, amely kizárólag a
          <strong>Folyó</strong> appban tekinthető meg.
          Már csak ezért is érdemes
          <a href="https://apps.apple.com/hu/app/id6736395120" target="_blank" rel="noopener">
            letölteni!
          </a>
          Miután telepítetted az iPhone készülékedre, nyomj a
          <strong>Szárazföldi napló</strong> feliratra, majd ugorj a
          <strong>87.</strong> oldalra benne!
          (Ugráshoz nyomj a jobb felső sarokban lévő oldalszámra az appban!)
        </p>
      `;
      container.appendChild(notice);
      continue;
    }

    const img = document.createElement("img");
    img.src = `${i}.jpeg`;
    img.alt = `Jóganapló – ${pageNumber}. oldal`;
    img.dataset.page = pageNumber;

    if (pageNumber > 1) img.loading = "lazy";

    container.appendChild(img);
    pages.push(img);

    pageNumber++;
  }
    
    const outro = document.createElement("div");
    outro.className = "intro";

    outro.innerHTML = `
      <p>
        Köszönöm, hogy elolvastad, vagy csak idáig legörgetted.
        Ez tehát egy részlet volt a <strong>Szárazföldi naplóból</strong>,
        annak a <strong>${firstIndex+1}–${lastIndex+1}</strong> oldalait olvashattad. (Az ottani számozás eltér az ittenitől, mert nem az elején van ez a részlet.)
      </p>

      <p>
        Ha kíváncsi vagy a folytatásra,
        <a href="https://apps.apple.com/hu/app/id6736395120" target="_blank" rel="noopener">
          töltsd le a Folyó nevű iPhone-appot,
        </a>
        és ugorj a <strong>Szárazföldi naplóban</strong> a
        <strong>${lastIndex+2}.</strong> oldalra!
      </p>

      <p>
        További jó szórakozást!
      </p>
    `;

    container.appendChild(outro);


  function updatePageIndicator() {
    const viewportCenter = window.innerHeight / 2;

    let closest = null;
    let minDistance = Infinity;

    for (const img of pages) {
      const rect = img.getBoundingClientRect();
      const distance = Math.abs(rect.top - viewportCenter);

      if (distance < minDistance) {
        minDistance = distance;
        closest = img;
      }
    }

    if (closest) {
      indicator.textContent = closest.dataset.page;
    }
  }

  window.addEventListener("scroll", updatePageIndicator, { passive: true });
  window.addEventListener("resize", updatePageIndicator);
  updatePageIndicator();
</script>

</body>
</html>
